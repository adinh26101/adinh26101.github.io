---
title: "APLS: ÄÃ¡nh GiÃ¡ Máº¡ng LÆ°á»›i ÄÆ°á»ng Bá»™"
date: 2024-06-06 10:00:00 +0000
categories: [Machine Learning, Computer Vision, Remote Sensing]
tags: [APLS, Road Network Extraction, SpaceNet3, Graph, Evaluation Metrics]
author: adinh26101
icon: fas fa-road
lang: vi
permalink: /posts/apls/
math: true
---

### Ná»™i dung
- [1. Giá»›i thiá»‡u vá» APLS](#-gioi-thieu)
- [2. Máº¡ng lÆ°á»›i Ä‘Æ°á»ng bá»™ dÆ°á»›i dáº¡ng Ä‘á»“ thá»‹ (Road Network Graph)](#-road-network-graph)
- [3. KhÃ³ khÄƒn trong Ä‘Ã¡nh giÃ¡ mÃ´ hÃ¬nh trÃ­ch xuáº¥t máº¡ng lÆ°á»›i Ä‘Æ°á»ng bá»™](#-kho-khan-danh-gia)
- [4. APLS â€“ Metric má»›i cho Ä‘Ã¡nh giÃ¡ máº¡ng lÆ°á»›i Ä‘Æ°á»ng bá»™](#-apls-metric)
- [5. Quy triÌ€nh snapping node trong APLS](#-quy-trinh-snapping)
- [6. Tham kháº£o](#-tham-khao)

<a name="-gioi-thieu"></a>
## 1. Giá»›i thiá»‡u vá» APLS

**APLS (Average Path Length Similarity)** lÃ  má»™t metric má»›i Ä‘Æ°á»£c phÃ¡t triá»ƒn nháº±m Ä‘Ã¡nh giÃ¡ hiá»‡u quáº£ cÃ¡c mÃ´ hÃ¬nh trÃ­ch xuáº¥t máº¡ng lÆ°á»›i Ä‘Æ°á»ng bá»™, Ä‘áº·c biá»‡t trong thá»­ thÃ¡ch SpaceNet3. SpaceNet3 lÃ  má»™t benchmark ná»•i báº­t trong lÄ©nh vá»±c xá»­ lÃ½ áº£nh vá»‡ tinh Ä‘á»ƒ trÃ­ch xuáº¥t báº£n Ä‘á»“ Ä‘Æ°á»ng bá»™ vá»›i dá»¯ liá»‡u lá»›n vÃ  Ä‘a dáº¡ng.

<a name="-road-network-graph"></a>
## 2. Máº¡ng lÆ°á»›i Ä‘Æ°á»ng bá»™ dÆ°á»›i dáº¡ng Ä‘á»“ thá»‹ (Road Network Graph)

Máº¡ng lÆ°á»›i Ä‘Æ°á»ng bá»™ cÃ³ thá»ƒ Ä‘Æ°á»£c biá»ƒu diá»…n dÆ°á»›i dáº¡ng Ä‘á»“ thá»‹ (graph), trong Ä‘Ã³ cÃ¡c nÃºt (nodes) tÆ°Æ¡ng á»©ng vá»›i Ä‘iá»ƒm giao nhau hoáº·c Ä‘iá»ƒm Ä‘áº·c trÆ°ng trÃªn Ä‘Æ°á»ng, cÃ²n cÃ¡c cáº¡nh (edges) lÃ  Ä‘oáº¡n Ä‘Æ°á»ng ná»‘i giá»¯a cÃ¡c nÃºt. Viá»‡c biá»ƒu diá»…n nÃ y cho phÃ©p xá»­ lÃ½ cÃ¡c bÃ i toÃ¡n nhÆ° tÃ¬m Ä‘Æ°á»ng Ä‘i ngáº¯n nháº¥t, phÃ¢n tÃ­ch káº¿t ná»‘i, hoáº·c mÃ´ phá»ng giao thÃ´ng.

<p>
    <img src="assets/2024-06-6-apls/segmentation.png" alt="segmentation"/>
    <em>MÃ´ hiÌ€nh deep learning seÌƒ cÃ´Ì gÄƒÌng "phÃ¢n Ä‘oaÌ£n" caÌc pixel road tÆ°Ì€ aÌ‰nh vaÌ€ Ä‘Æ°a vaÌ€o Ä‘Ã´Ì€ thiÌ£ Ä‘Æ°Æ¡Ì€ng</em>
</p>

<iframe src="/assets/2024-06-6-apls/gt_graph.html" width="100%" height="900px"></iframe>
<em>Äá»“ thá»‹ máº¡ng lÆ°á»›i Ä‘Æ°á»ng bá»™ gá»‘c (Ground Truth Graph)</em>

<iframe src="/assets/2024-06-6-apls/shortest_path.html" width="100%" height="900px"></iframe>
<em>Minh há»a tÃ¬m Ä‘Æ°á»ng Ä‘i ngáº¯n nháº¥t sá»­ dá»¥ng thuáº­t toÃ¡n Dijkstra</em>

<a name="-kho-khan-danh-gia"></a>
## 3. KhÃ³ khÄƒn trong Ä‘Ã¡nh giÃ¡ mÃ´ hÃ¬nh trÃ­ch xuáº¥t máº¡ng lÆ°á»›i Ä‘Æ°á»ng bá»™

ÄÃ¡nh giÃ¡ cÃ¡c mÃ´ hÃ¬nh trÃ­ch xuáº¥t máº¡ng lÆ°á»›i Ä‘Æ°á»ng bá»™ truyá»n thá»‘ng thÆ°á»ng dá»±a trÃªn chá»‰ sá»‘ pixel (pixel-based metrics) nhÆ° IoU hay pixel accuracy. Tuy nhiÃªn, cÃ¡c metric nÃ y khÃ´ng pháº£n Ã¡nh Ä‘áº§y Ä‘á»§ cháº¥t lÆ°á»£ng cáº¥u trÃºc máº¡ng lÆ°á»›i, vÃ­ dá»¥ nhÆ° Ä‘á»™ liÃªn káº¿t hay tÃ­nh chÃ­nh xÃ¡c cá»§a cÃ¡c Ä‘oáº¡n Ä‘Æ°á»ng ná»‘i.

Äiá»u nÃ y dáº«n Ä‘áº¿n khÃ³ khÄƒn trong viá»‡c Ä‘o lÆ°á»ng chÃ­nh xÃ¡c kháº£ nÄƒng mÃ´ hÃ¬nh táº¡o ra báº£n Ä‘á»“ Ä‘Æ°á»ng bá»™ cÃ³ tÃ­nh á»©ng dá»¥ng thá»±c táº¿ cao.

<a name="-apls-metric"></a>
## 4. APLS â€“ Metric má»›i cho Ä‘Ã¡nh giÃ¡ máº¡ng lÆ°á»›i Ä‘Æ°á»ng bá»™

APLS Ä‘Æ°á»£c thiáº¿t káº¿ nháº±m kháº¯c phá»¥c nhá»¯ng háº¡n cháº¿ cá»§a cÃ¡c metric truyá»n thá»‘ng, vá»‘n thÆ°á»ng dá»±a trÃªn Ä‘Ã¡nh giÃ¡ theo tá»«ng pixel mÃ  bá» qua tÃ­nh cháº¥t cáº¥u trÃºc cá»§a máº¡ng lÆ°á»›i Ä‘Æ°á»ng bá»™. Thay vÃ o Ä‘Ã³, APLS so sÃ¡nh sá»± tÆ°Æ¡ng Ä‘á»“ng vá» cÃ¡c Ä‘Æ°á»ng Ä‘i ngáº¯n nháº¥t giá»¯a máº¡ng lÆ°á»›i tháº­t vÃ  máº¡ng lÆ°á»›i dá»± Ä‘oÃ¡n, tá»« Ä‘Ã³ Ä‘Ã¡nh giÃ¡ cháº¥t lÆ°á»£ng mÃ´ hÃ¬nh trÃ­ch xuáº¥t Ä‘Æ°á»ng bá»™ má»™t cÃ¡ch chÃ­nh xÃ¡c hÆ¡n.

**CÃ´ng thá»©c Ä‘Ã¡nh giÃ¡ APLS nhÆ° sau:**

$$
\text{APLS} = 1 - \frac{1}{|P|} \sum_{(a,b) \in P} \min\left(1, \frac{|L_G(a,b) - L_{G'}(a',b')|}{L_G(a,b)}\right)
$$

Trong Ä‘Ã³:

- $$P$$ lÃ  táº­p cÃ¡c cáº·p nÃºt $$(a, b)$$ trong Ä‘á»“ thá»‹ ground truth $$G$$.  
- $$L_G(a,b)$$ lÃ  Ä‘á»™ dÃ i Ä‘Æ°á»ng Ä‘i ngáº¯n nháº¥t giá»¯a $$a$$ vÃ  $$b$$ trong Ä‘á»“ thá»‹ $$G$$ (ground truth).  
- $$L_{G'}(a',b')$$ lÃ  Ä‘á»™ dÃ i Ä‘Æ°á»ng Ä‘i ngáº¯n nháº¥t giá»¯a cÃ¡c nÃºt tÆ°Æ¡ng á»©ng $$a'$$ vÃ  $$b'$$ trong Ä‘á»“ thá»‹ $$G'$$ (dá»± Ä‘oÃ¡n).  
- CÃ¡c nÃºt $$a'$$, $$b'$$ lÃ  káº¿t quáº£ tá»« quÃ¡ trÃ¬nh snapping nÃºt tá»« $$G$$ sang $$G'$$.

Äiá»ƒm APLS dao Ä‘á»™ng tá»« 0 Ä‘áº¿n 1, cÃ ng gáº§n 1 thá»ƒ hiá»‡n máº¡ng lÆ°á»›i dá»± Ä‘oÃ¡n cÃ ng giá»‘ng vá»›i máº¡ng tháº­t vá» cáº¥u trÃºc vÃ  Ä‘á»™ dÃ i Ä‘Æ°á»ng Ä‘i.

**Nháº­n xÃ©t:**

- APLS Æ°u tiÃªn Ä‘Ã¡nh giÃ¡ cáº¥u trÃºc máº¡ng lÆ°á»›i, Ä‘áº·c biá»‡t nhá»¯ng Ä‘oáº¡n Ä‘Æ°á»ng quan trá»ng cÃ³ táº§n suáº¥t sá»­ dá»¥ng cao (liÃªn quan Ä‘áº¿n betweenness centrality), giÃºp phÃ¡t hiá»‡n cÃ¡c lá»—i lá»›n nhÆ° máº¥t Ä‘oáº¡n Ä‘Æ°á»ng hoáº·c ngáº¯t káº¿t ná»‘i.  
- Náº¿u Ä‘Æ°á»ng Ä‘i ngáº¯n nháº¥t giá»¯a hai nÃºt trong Ä‘á»“ thá»‹ dá»± Ä‘oÃ¡n khÃ´ng tá»“n táº¡i (nghÄ©a lÃ  máº¥t Ä‘oáº¡n Ä‘Æ°á»ng), má»©c pháº¡t tá»‘i Ä‘a 1.0 sáº½ Ä‘Æ°á»£c Ã¡p dá»¥ng, khiáº¿n Ä‘iá»ƒm APLS giáº£m máº¡nh.  
- Äiá»u nÃ y giÃºp APLS pháº¡t náº·ng nhá»¯ng lá»—i nghiÃªm trá»ng nhÆ° máº¥t Ä‘Æ°á»ng hoáº·c Ä‘oáº¡n Ä‘Æ°á»ng khÃ´ng liá»n máº¡ch, Ä‘áº£m báº£o ráº±ng cÃ¡c tuyáº¿n Ä‘Æ°á»ng trong máº¡ng dá»± Ä‘oÃ¡n pháº£i Ä‘Æ°á»£c káº¿t ná»‘i chÃ­nh xÃ¡c.  
- Viá»‡c tÃ­nh toÃ¡n gá»“m hai bÆ°á»›c snapping ngÆ°á»£c nhau giá»¯a Ä‘á»“ thá»‹ tháº­t vÃ  dá»± Ä‘oÃ¡n giÃºp Ä‘Ã¡nh giÃ¡ toÃ n diá»‡n, trÃ¡nh bá» sÃ³t lá»—i á»Ÿ cáº£ hai phÃ­a.  
- Nhá» váº­y, APLS Ä‘Æ°á»£c xem lÃ  má»™t metric phÃ¹ há»£p vÃ  hiá»‡u quáº£ cho cÃ¡c bÃ i toÃ¡n trÃ­ch xuáº¥t vÃ  Ä‘Ã¡nh giÃ¡ máº¡ng lÆ°á»›i Ä‘Æ°á»ng bá»™ tá»« áº£nh vá»‡ tinh hoáº·c dá»¯ liá»‡u Ä‘á»‹a lÃ½ phá»©c táº¡p.

<a name="-quy-trinh-snapping"></a>
## 5. Quy triÌ€nh snapping node trong APLS

<p>
    <img src="assets/2024-06-6-apls/node-snapping-procedure.png" alt="node-snapping-procedure"/>
</p>
<div style="font-style: italic; margin-top: 0.5rem;">
    A: Äá»“ thá»‹ Ä‘Æ°á»ng chuáº©n vá»›i cÃ¡c nÃºt kiá»ƒm soÃ¡t (control nodes).<br/>
    B: Äá»“ thá»‹ Ä‘Æ°á»£c Ä‘á» xuáº¥t.<br/>
    C: Äá»“ thá»‹ chuáº©n (mÃ u cam) vÃ  cÃ¡c nÃºt kiá»ƒm soÃ¡t (mÃ u Ä‘á») chá»“ng lÃªn Ä‘á»“ thá»‹ Ä‘á» xuáº¥t (mÃ u xÃ¡m).<br/>
    D: NhÆ° hÃ¬nh C, nhÆ°ng cÃ³ thÃªm vÃ¹ng Ä‘á»‡m (buffer - mÃ u vÃ ng) xung quanh Ä‘á»“ thá»‹ Ä‘á» xuáº¥t.<br/>
    E: CÃ¡c nÃºt kiá»ƒm soÃ¡t cá»§a Ä‘á»“ thá»‹ chuáº©n Ä‘Æ°á»£c gáº¯n vÃ o cáº¡nh gáº§n nháº¥t cá»§a Ä‘á»“ thá»‹ Ä‘á» xuáº¥t, trá»« cÃ¡c nÃºt náº±m ngoÃ i vÃ¹ng Ä‘á»‡m (mÃ u xÃ¡m).<br/>
    F: Äá»“ thá»‹ Ä‘á» xuáº¥t cuá»‘i cÃ¹ng vá»›i cÃ¡c nÃºt Ä‘Ã£ Ä‘Æ°á»£c gáº¯n Ä‘Ãºng vá»‹ trÃ­ Ä‘á»ƒ so sÃ¡nh vá»›i Ä‘á»“ thá»‹ A.
</div>

<p></p>

<a name="-tham-khao"></a>
## 6. CÃ¡ch APLS hoáº¡t Ä‘á»™ng vÃ  tham kháº£o

[1] SpaceNet3 Road Detection and Routing Challenge. ğŸ”— [https://spacenet.ai/spacenet-challenge/overview/](https://spacenet.ai/spacenet-challenge/overview/)

[2] Road Network Extraction and Evaluation using APLS. ğŸ”— [https://arxiv.org/abs/1906.03563](https://arxiv.org/abs/1906.03563)